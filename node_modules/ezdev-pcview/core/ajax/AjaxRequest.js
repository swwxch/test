/**
 * Created by zhaofs on 2017/5/23.
 * ajax请求进一步封装
 */
export default {
    /**
     * ajax请求
     * @param args
     * {url:/demo/mybatisuser/pages-(必选),type:post-(默认)},可接受jquery.ajax的所有属性参数。
     */
    ajax: function (args) {
        if (args && args.url) {
            let ajaxOptions = $.extend({
                type: "post",
                cache: false,
                dataType: "json",
                data: {}
            }, args);
            return new Promise((resolve, reject) => {
                $.ajax(ajaxOptions).then((data) => {
                    if (data.code === '0') {
                        resolve(data|| {});

                        //兼容老系统
                    } else if (data.success) {
                        resolve(data.content || {});
                    } else {
                        reject(data);
                    }
                });
            });
        } else {
            throw new Error("参数无效，请传递如{url:/demo/mybatisuser/pages-(必选),type:post-(默认)}的JS对象");
        }
    }
};
